<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon List</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href='/css/styles.css'>
    <link type="text/css" rel="stylesheet" href='/css/nav.css'>
    <link type="text/css" rel="stylesheet" href='/css/poke-card.css'>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">

  </head>
  <body>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"></script>

    <nav class="navbar navbar-expand-lg navbar-dark">

      <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse nav-contents"
        id="navbarTogglerDemo02">
        <ul class="navbar-nav mx-auto p-2">
          <li class="nav-item active">
            <a class="nav-link" href="/">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Pokemons</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Berries</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Moves</a>
          </li>
        </ul>
      </div>
    </nav>

    <h1>Pokemon List</h1>
    <div class="container">
      <div class="row">
      <% pokemonList.forEach(pokemon => { %>
    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
        <div class="poke-card" onclick="openPokemonPage('<%= pokemon.id %>')">
          <div class="poke-experience">
            <strong>Exp </strong> <%= pokemon.base_experience %>
          </div>
          <div>
            <img class="pokeImg"
              src="<%= pokemon.pokemonMainImg %>"
              alt="Pokemon Image"
              />
          </div>
          <div class="poke-name"> <%= pokemon.name.toUpperCase() %> </div>
          <hr>
          <table >
            <tr>
              <th class="poke-table-heading"> <img class="stat-icon" width="48" height="48" src="https://img.icons8.com/fluency-systems-filled/48/height.png" alt="height"/> Height</th>
              <td class="poke-table-stats"><%= (pokemon.height* 3.9).toFixed(2) %> inches</td>
            </tr>
            <tr>
              <th class="poke-table-heading"><img class="stat-icon" width="24" height="24" src="https://img.icons8.com/material-sharp/24/weight-kg.png" alt="weight-kg"/>Weight</th>
              <td class="poke-table-stats"><%= (pokemon.weight * 0.1).toFixed(2) %> kg</td>
            </tr>
            <tr>
              <th class="poke-table-heading"><img class="stat-icon" width="64" height="64" src="https://img.icons8.com/external-wanicon-lineal-wanicon/64/external-ability-business-motivation-wanicon-lineal-wanicon.png" alt="external-ability-business-motivation-wanicon-lineal-wanicon"/>Ability</th>
              <td class="poke-table-stats"><%= pokemon.abilities[0].ability.name %></td>
            </tr>
            <tr>
              <th class="poke-table-heading">Type</th>
              <td class="poke-table-stats"><%= pokemon.types[0].type.name.toUpperCase() %></td>
            </tr>
          </table>
          <div></div>
         
        </div>
      </div>
      <% }); %>
      </div>
      <div class="pagination">
        <a class="page-link" href="/list?page=1">Previous</a>
        <% for (let i = 1; i <= 15; i++) { %>
          <a class="page-link" href="/list?page=<%= i %>"><%= i %></a>
        <% } %>
        <a class="page-link" href="/list?page=<%= 10 %>">Next</a>
      </div>
      </div>

      <script>
        function openPokemonPage(pokemonData) {
          const form = document.createElement('form');
        form.method = 'GET'; 
        form.action = '/pokemon';
       
        const input = document.createElement('input');
        input.type = 'hidden';
        input.name = 'pokemonId';
        input.value = pokemonData;
        console.log(pokemonData);

        form.appendChild(input);

       
        document.body.appendChild(form);
        form.submit();
          }
    </script>

  </body>
</html>
